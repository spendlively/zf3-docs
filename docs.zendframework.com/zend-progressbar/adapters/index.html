<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <link rel="shortcut icon" href="../img/favicon.ico">

    <title>Adapters - zend-progressbar</title>

    <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href="//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Libre+Baskerville:400,400italic,700&subset=latin,latin-ext" rel="stylesheet" type="text/css">
    <link href="../css/base.css" rel="stylesheet">
    <link href="../css/zf-web.css" rel="stylesheet">
    <link href="../css/zf.css" rel="stylesheet">
    <link href="../css/prism-zf.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <span class="navbar-brand">
              <a class="logo-link" href="http://framework.zend.com" data-toggle="tooltip" data-placement="bottom" title="Zend Framework"><img src="../img/zf-logo-mark.svg" height="28" alt="Zend Framework" /></a>
              <a href="..">zend-progressbar</a>
            </span>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Progress Bars <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../intro/">Intro</a>
</li>

                        
                            
<li class="active">
    <a href="./">Adapters</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="../upload/">File Upload Handlers</a>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" class="component-toggle" data-toggle="tooltip" data-placement="bottom" title="Show component list">
                        <i class="fa fa-book"></i> Components
                    </a>
                </li>

                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li>
                        <a href="https://github.com/zendframework/zend-progressbar">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

    <!-- content:begin -->
    <div id="page-top" class="container docs">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#standard-adapters">Standard Adapters</a></li>
        
            <li><a href="#console-adapter">Console Adapter</a></li>
        
            <li><a href="#jspush-adapter">JsPush Adapter</a></li>
        
            <li><a href="#jspull-adapter">JsPull Adapter</a></li>
        
    
    </ul>

    
    <ul class="pager hidden-print">
      <li class="previous">
        <a rel="prev" href="../intro/"><i class="fa fa-arrow-left"></i> Previous</a>
      </li>
      <li class="next">
        <a rel="next" href="../upload/">Next <i class="fa fa-arrow-right"></i></a>
      </li>
    </ul>
    
</div></div>
        <div class="col-md-9" role="main">

<ol class="breadcrumb" role="navigation" aria-label="breadcrumbs navigation">
  <li><a href="..">zend-progressbar</a> &raquo;</li>
  
    
      
        <li>Progress Bars &raquo;</li>
      
    
  
  <li class="active">Adapters</li>
</ol>

<h1 id="standard-adapters">Standard Adapters</h1>
<p>zend-progressbar comes with the following three adapters:</p>
<ul>
<li><a href="#console-adapter">Zend\Progressbar\Adapter\Console</a></li>
<li><a href="#jspush-adapter">Zend\Progressbar\Adapter\JsPush</a></li>
<li><a href="#jspull-adapter">Zend\ProgressBar\Adapter\JsPull</a></li>
</ul>
<h2 id="console-adapter">Console Adapter</h2>
<p><code>Zend\ProgressBar\Adapter\Console</code> is a text-based adapter for terminals. It can
automatically detect terminal widths, but supports custom widths as well. You
can define which elements are displayed with the progressbar as well customize
the order of them. You can also define the style of the progressbar itself.</p>
<blockquote>
<h3 id="automatic-console-width-recognition">Automatic console width recognition</h3>
<p><code>shell_exec()</code> is required for this feature to work on *nix based systems. On
Windows, there is always a fixed terminal width of 80 characters, so no
recognition is required there.</p>
</blockquote>
<p>You can set the adapter options either via the <code>set*()</code> methods, or provide an
array or <code>Traversable</code> instance with options as first parameter to the
constructor. The available options are:</p>
<div class="table-responsive"><table>
<thead>
<tr>
<th>Option name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>outputStream</td>
<td><code>string|resource</code></td>
<td>A different output stream, if you don't want to stream to <code>STDOUT</code>. Can be any other stream like <code>php://stderr</code> or a path to a file.</td>
</tr>
<tr>
<td>width</td>
<td><code>int|ProgressBar::AUTO</code></td>
<td>Console width to use; <code>ProgressBar::AUTO</code> indicates the adapter should autodetect the width.</td>
</tr>
<tr>
<td>elements</td>
<td><code>null|array</code></td>
<td>Which elements to include in the display; <code>null</code> to include all, or an array with one of the <code>Console</code> constants, as detailed below.</td>
</tr>
<tr>
<td>textWidth</td>
<td><code>int</code></td>
<td>Width in characters of the <code>ELEMENT_TEXT</code> element. Default is 20.</td>
</tr>
<tr>
<td>charset</td>
<td><code>string</code></td>
<td>Charset of the <code>ELEMENT_TEXT</code> element. Default is utf-8.</td>
</tr>
<tr>
<td>barLeftChar</td>
<td><code>string</code></td>
<td>String to use on the left-hand side of the progressbar indicator.</td>
</tr>
<tr>
<td>barRightChar</td>
<td><code>string</code></td>
<td>String to use on the right-hand side of the progressbar indicator.</td>
</tr>
<tr>
<td>barIndicatorChar</td>
<td><code>string</code></td>
<td>String to use within the progressbar indicator to indicate progress; can be empty.</td>
</tr>
</tbody>
</table></div>
<p>To determine which elements to display in the progressbar, use one or more of
the following constants:</p>
<div class="table-responsive"><table>
<thead>
<tr>
<th>Option name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ELEMENT_PERCENT</code></td>
<td>The current value in percent.</td>
</tr>
<tr>
<td><code>ELEMENT_BAR</code></td>
<td>The visual bar which display the percentage.</td>
</tr>
<tr>
<td><code>ELEMENT_ETA</code></td>
<td>The automatic calculated ETA. This element is firstly displayed after five seconds, because in this time, it is not able to calculate accurate results.</td>
</tr>
<tr>
<td><code>ELEMENT_TEXT</code></td>
<td>An optional status message about the current process.</td>
</tr>
</tbody>
</table></div>
<h2 id="jspush-adapter">JsPush Adapter</h2>
<p><code>Zend\ProgressBar\Adapter\JsPush</code> is an adapter allowing you to update a
browser-based progressbar via Javascript Push. This means that no second
connection is required to gather the status about a running process, but that
the process itself sends its status directly to the browser.</p>
<p>You can set the adapter options either via the <code>set()</code> methods or provide an
array or <code>Traversable</code> instance with options as the first parameter to the
constructor. The available options are:</p>
<div class="table-responsive"><table>
<thead>
<tr>
<th>Option name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>updateMethodName</td>
<td><code>string</code></td>
<td>The JavaScript method which should be called on every update. Default value is <code>Zend\ProgressBar\Update</code>.</td>
</tr>
<tr>
<td>finishMethodName</td>
<td><code>null|string</code></td>
<td>The JavaScript method which should be called when sending the finish status. Default value is <code>NULL</code>, which means nothing is done.</td>
</tr>
</tbody>
</table></div>
<p>To use this adapter, first create a progressbar in your browser, either with
JavaScript or plain HTML. Then define the update method and optionally a finish
method in JavaScript; both should expect a JSON object as the only argument.
Then call a webpage with the long-running process in a hidden <code>iframe</code> or
<code>object</code> tag. While the process is running, the adapter will call the update
method on every update with a JSON object, containing the following parameters:</p>
<div class="table-responsive"><table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>current</td>
<td>The current absolute value detailing upload status.</td>
</tr>
<tr>
<td>max</td>
<td>The max absolute value, indicating total upload size.</td>
</tr>
<tr>
<td>percent</td>
<td>The calculated percentage complete of the upload.</td>
</tr>
<tr>
<td>timeTaken</td>
<td>The elapsed time of the upload currently.</td>
</tr>
<tr>
<td>timeRemaining</td>
<td>The expected time until the upload finishes.</td>
</tr>
<tr>
<td>text</td>
<td>The optional status message, if given.</td>
</tr>
</tbody>
</table></div>
<h3 id="basic-example-for-the-client-side">Basic example for the client-side</h3>
<p>This example illustrates a basic setup of HTML, CSS, and JavaScript for the <code>JsPush</code> adapter</p>
<pre class="codehilite"><code class="language-html">&lt;div id=&quot;zend-progressbar-container&quot;&gt;
    &lt;div id=&quot;zend-progressbar-done&quot;&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;iframe src=&quot;long-running-process.php&quot; id=&quot;long-running-process&quot;&gt;&lt;/iframe&gt;</code></pre>


<pre class="codehilite"><code class="language-css">#long-running-process {
    position: absolute;
    left: -100px;
    top: -100px;

    width: 1px;
    height: 1px;
}

#zend-progressbar-container {
    width: 100px;
    height: 30px;

    border: 1px solid #000000;
    background-color: #ffffff;
}

#zend-progressbar-done {
    width: 0;
    height: 30px;

    background-color: #000000;
}</code></pre>


<pre class="codehilite"><code class="language-javascript">function Zend\ProgressBar\Update(data)
{
    document.getElementById('zend-progressbar-done').style.width = data.percent + '%';
}</code></pre>


<p>This will create a container with a black border and a block which indicates the
current process. You should not hide the <code>iframe</code> or <code>object</code> using <code>display: none;</code>,
as some browsers (such as Safari 2) will not load the actual content then.</p>
<p>Instead of creating your custom progressbar, you may want to use one of the
available JavaScript libraries like Dojo, jQuery etc.:</p>
<ul>
<li><a href="http://dojotoolkit.org/reference-guide/dijit/ProgressBar.html">Dojo</a></li>
<li><a href="https://api.jqueryui.com/progressbar/">jQuery</a></li>
<li><a href="http://davidwalsh.name/dw-content/progress-bar.php">MooTools</a></li>
<li><a href="http://livepipe.net/control/progressbar">Prototype</a></li>
</ul>
<blockquote>
<h3 id="interval-of-updates">Interval of updates</h3>
<p>Do not send too many updates, as every update has a minimum size of 1kb. This
is a requirement for the Safari browser to actually render and execute the
function call. Internet Explorer has a similar limitation of 256 bytes.</p>
</blockquote>
<h2 id="jspull-adapter">JsPull Adapter</h2>
<p><code>Zend\ProgressBar\Adapter\JsPull</code> is the opposite of <code>JsPush</code>, as it requires
the browser to pull for new updates, instead of
pushing updates directly without intervention.</p>
<p>In general, you should use this adapter with the
<a href="../intro/#persistent-progress">persistence option of the <code>Zend\ProgressBar\ProgressBar</code></a>.
On notify, the adapter sends a JSON string to the browser, which looks exactly
like the JSON string which is sent by the <code>JsPush</code> adapter, with one difference:
it contains an additional parameter, <code>finished</code>, which is either <code>false</code> when
<code>update()</code> is called or <code>true</code>, when <code>finish()</code> is called.</p>
<p>You can set the adapter options either via the <code>set*()</code> methods, or give an
array or <code>Traversable</code> instance with options as first parameter to
the constructor. The available options are:</p>
<div class="table-responsive"><table>
<thead>
<tr>
<th>Option name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>exitAfterSend</td>
<td><code>bool</code></td>
<td>Whether or not to exit the current request after the data is sent to the browser; default is <code>true</code>.</td>
</tr>
</tbody>
</table></div>

<hr />


<nav>
  <ul class="pager hidden-print">
    <li class="previous">
      <a rel="prev" href="../intro/"><i class="fa fa-arrow-left"></i> Previous</a>
    </li>
    <li class="next">
      <a rel="next" href="../upload/">Next <i class="fa fa-arrow-right"></i></a>
    </li>
  </ul>
</nav>
</div>
        
    </div>
    <!-- content:end -->

    <div id="footerwrap">
    <div class="container">
        <div class="row site-map">
            <div class="col-lg-3">
              <p>
                <strong>Zend Framework</strong><br />
                <a href="http://framework.zend.com/">framework.zend.com</a><br />
                <a href="https://docs.zendframework.com">docs.zendframework.com</a><br />
                <a href="https://packages.zendframework.com">packages.zendframework.com</a><br />
                <a href="https://apigility.org">apigility.org</a><br />
              </p>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-12 centered">
                <a class="back-to-top" href="#page-top"><i class="fa fa-chevron-circle-up fa-4" aria-hidden="true"></i></a>
            </div>
        </div>

        <div class="spacing"></div>

        <div class="row">
            <div class="col-lg-8">
                <h4>Copyright</h4>
                <div class="hline-w"></div>

                <p>&copy; 2006-2016 by <a href="http://www.zend.com">Zend</a>, a <a href="http://www.roguewave.com/">Rogue Wave Company</a>.</p>
            </div>

            <div class="col-lg-4">
                <h4>Contacts</h4>
                <div class="hline-w"></div>
                <p>
                    <a href="irc://irc.freenode.net/zftalk" class="btn-social btn-outline" alt="IRC" title="IRC"><i class="fa fa-comment"></i></a>
                    <a href="https://github.com/zendframework" class="btn-social btn-outline" alt="Github" title="Github"><i class="fa fa-github"></i></a>
                    <a href="https://twitter.com/zfdevteam" class="btn-social btn-outline" alt="Twitter" title="Twitter"><i class="fa fa-twitter"></i></a>
                </p>
            </div>
        </div>
    </div>
</div>


    <script src="../js/jquery-1.10.2.min.js"></script>
    <script src="../js/bootstrap-3.0.3.min.js"></script>
    <script src="../js/prism-zf.js"></script>

    <script>var base_url = '..';</script>
    <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
    <script src="../js/base.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    <div class="zf-components">
  <div class="zf-components-grid">
    <div class="zf-logo">
      <a href="http://framework.zend.com" data-toggle="tooltip" data-placement="bottom" title="Go to the ZF homepage"><img src="../img/zf-logo-mark.svg" alt="Zend Framework" width="250" /></a>
    </div>

    <div class="component-list"></div>

    <p class="zf-components-rollup"><a href="#">Hide list</a></p>
  </div>
</div>

    <script>
  // Prepare the component list dropdown for display
  $(function () {
    var components = $(".zf-components"),
        componentList = components.find(".component-list"),
        sidebar = $(".bs-sidebar.affix"),
        sidebarInitialPos = sidebar.css("position"),
        hidden,
        componentToggle = $(".component-toggle"),
        navbar = $(".navbar-fixed-top"),
        rollUpLink = $(".zf-components-rollup a");

    // Initial setup on document load
    components.insertBefore(navbar);
    $(".zf-logo a").tooltip();
    componentToggle.tooltip();
    rollUpLink.attr({ href: "#", alt: "Hide component list" });

    // Cast initial sidebar position value
    if (undefined === sidebarInitialPos) {
      sidebarInitialPos = "fixed";
    }

    // Setup onclick events to toggle list
    componentToggle.click(toggleComponentList);
    rollUpLink.click(toggleComponentList);

    // Toggle the component list display
    function toggleComponentList(event) {
      event.preventDefault();

      if (hidden === undefined) {
        // Not loaded yet; load and display.
        loadComponentList();
        return;
      }

      if (hidden) {
        // Hidden; display.
        showComponentList();
        return;
      }

      // Currently visible; hide
      hideComponentList();
    }

    // Show the component list
    function showComponentList() {
      navbar.css({position: "relative"});
      sidebar.css({position: "relative"});
      components
        .css({"margin-top": "-" + components.outerHeight() + "px"})
        .show()
        .animate({"margin-top": 0}, {
          complete: function () {
            componentToggle
              .data("placement", "top")
              .attr("data-original-title", "Hide component list");
            hidden = false;
          },
          queue: false
        });
    }

    // Hide the component list
    function hideComponentList() {
      components.animate({"margin-top": "-" + components.outerHeight() + "px"}, {
        complete: function () {
          navbar.css({position: "fixed"});
          sidebar.css({position: sidebarInitialPos});
          componentToggle
            .data("placement", "bottom")
            .attr("data-original-title", "Show component list");
          components.hide();
          hidden = true;
        },
        queue: false
      });
      sidebar.animate({ top: sidebarInitialTop + "px" }, { queue: false});
    }

    // Inject a component into the componet list DOM.
    function injectComponent(index, component) {
      componentList.append('<div class="component"><h4><a href="' + component.url + '">' + component.name + '</a></h4><p>' + component.description + '</p></div>');
    }

    // Parse the component list, build the DOM, and display it.
    function parseComponentList(components) {
      $.each(components, injectComponent);
      showComponentList();
    }

    // Fetch the component list and display it.
    function loadComponentList () {
      $.ajax({
        url: "//docs.zendframework.com/zf-mkdoc-theme/scripts/zf-component-list.json",
        dataType: "text json",
        success: parseComponentList,
        error: function (e) {
          console.log("Error occurred with XHR call", e);
        }
      });
    }
  });
</script>
    </body>

</html>
