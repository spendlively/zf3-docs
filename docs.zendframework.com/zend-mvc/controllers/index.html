<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <link rel="shortcut icon" href="../img/favicon.ico">

    <title>Available Controllers - zend-mvc</title>

    <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href="//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Libre+Baskerville:400,400italic,700&subset=latin,latin-ext" rel="stylesheet" type="text/css">
    <link href="../css/base.css" rel="stylesheet">
    <link href="../css/zf-web.css" rel="stylesheet">
    <link href="../css/zf.css" rel="stylesheet">
    <link href="../css/prism-zf.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <span class="navbar-brand">
              <a class="logo-link" href="http://framework.zend.com" data-toggle="tooltip" data-placement="bottom" title="Zend Framework"><img src="../img/zf-logo-mark.svg" height="28" alt="Zend Framework" /></a>
              <a href="..">zend-mvc</a>
            </span>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="..">Home</a>
                    </li>
                
                
                
                    <li >
                        <a href="../intro/">Introduction</a>
                    </li>
                
                
                
                    <li >
                        <a href="../quick-start/">Quick Start</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Reference <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../services/">Default Services</a>
</li>

                        
                            
<li >
    <a href="../routing/">Routing</a>
</li>

                        
                            
<li >
    <a href="../mvc-event/">The MVC Event</a>
</li>

                        
                            
<li >
    <a href="../send-response-event/">The SendResponse Event</a>
</li>

                        
                            
<li class="active">
    <a href="./">Available Controllers</a>
</li>

                        
                            
<li >
    <a href="../plugins/">Controller Plugins</a>
</li>

                        
                            
<li >
    <a href="../examples/">Examples</a>
</li>

                        
                            
<li >
    <a href="../middleware/">Dispatching PSR-7 Middleware</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Migration</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../migration/">Migration Overview</a>
</li>

        
            
<li >
    <a href="../migration/to-v2-7/">v2.X to v2.7</a>
</li>

        
            
<li >
    <a href="../migration/to-v3-0/">v2.X to v3.0</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Cookbook <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../cookbook/automating-controller-factories/">Automating controller factories</a>
</li>

                        
                            
<li >
    <a href="../cookbook/middleware-in-listeners/">Using middleware within event listeners</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" class="component-toggle" data-toggle="tooltip" data-placement="bottom" title="Show component list">
                        <i class="fa fa-book"></i> Components
                    </a>
                </li>

                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li>
                        <a href="https://github.com/zendframework/zend-mvc">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

    <!-- content:begin -->
    <div id="page-top" class="container docs">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#available-controllers">Available Controllers</a></li>
        
            <li><a href="#common-interfaces-used-with-controllers">Common Interfaces Used With Controllers</a></li>
        
            <li><a href="#abstractactioncontroller">AbstractActionController</a></li>
        
            <li><a href="#abstractrestfulcontroller">AbstractRestfulController</a></li>
        
            <li><a href="#abstractconsolecontroller">AbstractConsoleController</a></li>
        
    
    </ul>

    
    <ul class="pager hidden-print">
      <li class="previous">
        <a rel="prev" href="../send-response-event/"><i class="fa fa-arrow-left"></i> Previous</a>
      </li>
      <li class="next">
        <a rel="next" href="../plugins/">Next <i class="fa fa-arrow-right"></i></a>
      </li>
    </ul>
    
</div></div>
        <div class="col-md-9" role="main">

<ol class="breadcrumb" role="navigation" aria-label="breadcrumbs navigation">
  <li><a href="..">zend-mvc</a> &raquo;</li>
  
    
      
        <li>Reference &raquo;</li>
      
    
  
  <li class="active">Available Controllers</li>
</ol>

<h1 id="available-controllers">Available Controllers</h1>
<p>Controllers in zend-mvc are objects implementing <code>Zend\Stdlib\DispatchableInterface</code>.
That interface describes a single method:</p>
<pre class="codehilite"><code class="language-php linenums">use Zend\Stdlib\DispatchableInterface;
use Zend\Stdlib\RequestInterface as Request;
use Zend\Stdlib\ResponseInterface as Response;

class Foo implements DispatchableInterface
{
    public function dispatch(Request $request, Response $response = null)
    {
        // ... do something, and preferably return a Response ...
    }
}</code></pre>

<p>While the pattern is straight-forward, chances are you don't want to implement
custom dispatch logic for every controller, particularly as it's not unusual or
uncommon for a single controller to handle several related types of requests.</p>
<p>To provide convenience, zend-mvc also defines several interfaces that, when
implemented, can provide controllers with additional capabilities.</p>
<h2 id="common-interfaces-used-with-controllers">Common Interfaces Used With Controllers</h2>
<h3 id="injectapplicationevent">InjectApplicationEvent</h3>
<p>The <code>Zend\Mvc\InjectApplicationEventInterface</code> hints to the <code>Application</code>
instance that it should inject its <code>MvcEvent</code> into the controller itself. Why
would this be useful?</p>
<p>Recall that the <code>MvcEvent</code> composes a number of objects: the <code>Request</code> and
<code>Response</code>, naturally, but also the router, the route matches (a <code>RouteMatch</code>
instance), and potentially the "result" of dispatching.</p>
<p>A controller that has the <code>MvcEvent</code> injected, then, can retrieve or inject
these. As an example:</p>
<pre class="codehilite"><code class="language-php linenums">$matches = $this-&gt;getEvent()-&gt;getRouteMatch();
$id      = $matches-&gt;getParam('id', false);
if (! $id) {
    $response = $this-&gt;getResponse();
    $response-&gt;setStatusCode(500);
    $this-&gt;getEvent()-&gt;setResult('Invalid identifier; cannot complete request');
    return;
}</code></pre>

<p>The <code>InjectApplicationEventInterface</code> defines two methods:</p>
<pre class="codehilite"><code class="language-php linenums">public function setEvent(Zend\EventManager\EventInterface $event);
public function getEvent();</code></pre>

<h3 id="servicelocatoraware">ServiceLocatorAware</h3>
<p>In most cases, you should define your controllers such that dependencies are
injected by the application's <code>ServiceManager</code>, via either constructor arguments
or setter methods.</p>
<p>However, occasionally you may have objects you wish to use in your controller
that are only valid for certain code paths. Examples include forms, paginators,
navigation, etc. In these cases, you may decide that it doesn't make sense to
inject those objects every time the controller is used.</p>
<p>The <code>ServiceLocatorAwareInterface</code> interface hints to the <code>ServiceManager</code> that it should inject
itself into the controller. It defines two simple methods:</p>
<pre class="codehilite"><code class="language-php linenums">use Zend\ServiceManager\ServiceLocatorInterface;
use Zend\ServiceManager\ServiceLocatorAwareInterface;

public function setServiceLocator(ServiceLocatorInterface $serviceLocator);
public function getServiceLocator();</code></pre>

<blockquote>
<h4 id="servicelocatorinterface-is-deprecated">ServiceLocatorInterface is deprecated</h4>
<p><code>ServiceLocatorAwareInterface</code> <a href="http://zendframework.github.io/zend-servicemanager/migration/#miscellaneous-interfaces-traits-and-classes">was removed from zend-servicemanager v3.0</a>,
and, as such, starting in zend-mvc 2.7.0, the <code>AbstractController</code>
implementation no longer implements the interface, though it implements the
methods the interface defines; this allows forwards compatibility with
zend-servicemanager v3.</p>
<p>However, also starting with the zend-mvc 2.7.0 release, <code>ServiceLocatorAwareInterface</code>
usage is deprecated. We recommend injecting dependencies explicitly instead of
pulling them from a composed <code>ServiceManager</code> instance.</p>
<p>In cases where an object will not be used in all code paths, we recommend
splitting into discrete controllers, or using <a href="http://zendframework.github.io/zend-servicemanager/lazy-services/">lazy services</a>.</p>
</blockquote>
<h3 id="eventmanageraware">EventManagerAware</h3>
<p>Typically, it's nice to be able to tie into a controller's workflow without
needing to extend it or hardcode behavior into it. The solution for this is to
use the <code>EventManager</code>.</p>
<p>You can hint to the <code>ServiceManager</code> that you want an <code>EventManager</code> injected by
implementing the interface <code>EventManagerAwareInterface</code>, which tells the
<code>ServiceManager</code> to inject an <code>EventManager</code>.</p>
<p>To do this, you define two methods. The first, a setter, should also set any
<code>SharedEventManager</code> identifiers you want to listen on, and the second, a getter,
should return the composed <code>EventManager</code> instance.</p>
<pre class="codehilite"><code class="language-php linenums">use Zend\EventManager\EventManagerAwareInterface;
use Zend\EventManager\EventManagerInterface;

public function setEventManager(EventManagerInterface $events);
public function getEventManager();</code></pre>

<h3 id="controller-plugins">Controller Plugins</h3>
<p>Code re-use is a common goal for developers. Another common goal is convenience.
However, this is often difficult to achieve cleanly in abstract, general
systems.</p>
<p>Within your controllers, you'll often find yourself repeating tasks from one
controller to another.  Some common examples:</p>
<ul>
<li>Generating URLs.</li>
<li>Redirecting.</li>
<li>Setting and retrieving flash messages (self-expiring session messages).</li>
<li>Invoking and dispatching additional controllers.</li>
</ul>
<p>To facilitate these actions while also making them available to alternate
controller implementations, we've created a <code>PluginManager</code> implementation for
the controller layer, <code>Zend\Mvc\Controller\PluginManager</code>, building on the
<code>Zend\ServiceManager\AbstractPluginManager</code> functionality. To utilize it,
implement the <code>setPluginManager(PluginManager $plugins)</code> method, and set up your
code to use the controller-specific implementation by default:</p>
<pre class="codehilite"><code class="language-php linenums">use Zend\Mvc\Controller\PluginManager;

public function setPluginManager(PluginManager $plugins)
{
    $this-&gt;plugins = $plugins;
    $this-&gt;plugins-&gt;setController($this);

    return $this;
}

public function getPluginManager()
{
    if (!$this-&gt;plugins) {
        $this-&gt;setPluginManager(new PluginManager());
    }

    return $this-&gt;plugins;
}

public function plugin($name, array $options = null)
{
    return $this-&gt;getPluginManager()-&gt;get($name, $options);
}</code></pre>

<h2 id="abstractactioncontroller">AbstractActionController</h2>
<p>Implementing each of the above interfaces is a lesson in redundancy; you won't
often want to do it.  As such, we've developed abstract, base controllers you
can extend to get started.</p>
<p>The first is <code>Zend\Mvc\Controller\AbstractActionController</code>. This controller
implements each of the above interfaces, and uses the following assumptions:</p>
<ul>
<li>An "action" parameter is expected in the <code>RouteMatch</code> object composed in the
  attached <code>MvcEvent</code>.  If none is found, a <code>notFoundAction()</code> is invoked.</li>
<li>The "action" parameter is converted to a camelCased format and appended with
  the word "Action" to create a method name. As examples: "foo" maps to
  <code>fooAction</code>, "foo-bar" or "foo.bar" or "foo_bar" to <code>fooBarAction</code>. The
  controller then checks to see if that method exists. If not, the
  <code>notFoundAction()</code> method is invoked; otherwise, the discovered method is
  called.</li>
<li>The results of executing the given action method are injected into the
  <code>MvcEvent</code>'s "result" property (via <code>setResult()</code>, and accessible via
  <code>getResult()</code>).</li>
</ul>
<p>Essentially, a route mapping to an <code>AbstractActionController</code> needs to return
both the "controller" and "action" keys in its matches.</p>
<p>Creation of action controllers looks like the following example:</p>
<pre class="codehilite"><code class="language-php linenums">namespace Foo\Controller;

use Zend\Mvc\Controller\AbstractActionController;

class BarController extends AbstractActionController
{
    public function bazAction()
    {
        return ['title' =&gt; __METHOD__];
    }

    public function batAction()
    {
        return ['title' =&gt; __METHOD__];
    }
}</code></pre>

<h3 id="interfaces-and-collaborators">Interfaces and Collaborators</h3>
<p><code>AbstractActionController</code> implements each of the following interfaces:</p>
<ul>
<li><code>Zend\Stdlib\DispatchableInterface</code></li>
<li><code>Zend\Mvc\InjectApplicationEventInterface</code></li>
<li><code>Zend\ServiceManager\ServiceLocatorAwareInterface</code> (starting with zend-mvc
  2.7.0, only the methods defined by the interface, not the interface itself)</li>
<li><code>Zend\EventManager\EventManagerAwareInterface</code></li>
</ul>
<p>The composed <code>EventManager</code> will be configured to listen on the following contexts:</p>
<ul>
<li><code>Zend\Stdlib\DispatchableInterface</code></li>
<li><code>Zend\Mvc\Controller\AbstractActionController</code></li>
<li><code>Zend\Mvc\Controller\AbstractController</code></li>
</ul>
<p>Additionally, if you extend the class, it will listen on the name of the
extending class.</p>
<h2 id="abstractrestfulcontroller">AbstractRestfulController</h2>
<p><code>Zend\Mvc\Controller\AbstractRestfulController</code> provides a native RESTful
implementation that maps HTTP request methods to controller methods, using the
following matrix:</p>
<ul>
<li><strong>GET</strong> maps to either <code>get()</code> or <code>getList()</code>, depending on whether or not an
  "id" parameter is found in the route matches. If one is, it is passed as an
  argument to <code>get()</code>; if not, <code>getList()</code> is invoked. In the former case, you
  should provide a representation of the given entity with that identification;
  in the latter, you should provide a list of entities.</li>
<li><strong>POST</strong> maps to <code>create()</code>. That method expects a <code>$data</code> argument, usually
  the <code>$_POST</code> superglobal array. The data should be used to create a new
  entity, and the response should typically be an HTTP 201 response with the
  Location header indicating the URI of the newly created entity and the
  response body providing the representation.</li>
<li><strong>PUT</strong> maps to <code>update()</code>, and requires that an "id" parameter exists in the
  route matches; that value is passed as an argument to the method. It should
  attempt to update the given entity, and, if successful, return either a 200 or
  202 response status, as well as the representation of the entity.</li>
<li><strong>DELETE</strong> maps to <code>delete()</code>, and requires that an "id" parameter exists in
  the route matches; that value is passed as an argument to the method. It
  should attempt to delete the given entity, and, if successful, return either a
  200 or 204 response status.</li>
</ul>
<p>Additionally, you can map "action" methods to the <code>AbstractRestfulController</code>,
just as you would in the <code>AbstractActionController</code>; these methods will be
suffixed with "Action", differentiating them from the RESTful methods listed
above. This allows you to perform such actions as providing forms used to submit
to the various RESTful methods, or to add RPC methods to your RESTful API.</p>
<h3 id="interfaces-and-collaborators_1">Interfaces and Collaborators</h3>
<p><code>AbstractRestfulController</code> implements each of the following interfaces:</p>
<ul>
<li><code>Zend\Stdlib\DispatchableInterface</code></li>
<li><code>Zend\Mvc\InjectApplicationEventInterface</code></li>
<li><code>Zend\ServiceManager\ServiceLocatorAwareInterface</code> (starting with zend-mvc
  2.7.0, only the methods defined by the interface, not the interface itself)</li>
<li><code>Zend\EventManager\EventManagerAwareInterface</code></li>
</ul>
<p>The composed <code>EventManager</code> will be configured to listen on the following contexts:</p>
<ul>
<li><code>Zend\Stdlib\DispatchableInterface</code></li>
<li><code>Zend\Mvc\Controller\AbstractRestfulController</code></li>
<li><code>Zend\Mvc\Controller\AbstractController</code></li>
</ul>
<p>Additionally, if you extend the class, it will listen on the name of the
extending class.</p>
<h2 id="abstractconsolecontroller">AbstractConsoleController</h2>
<p><code>Zend\Mvc\Controller\AbstractConsoleController</code> extends from <a href="#abstractactioncontroller">AbstractActionController</a>
and provides the following functionality:</p>
<ul>
<li>The method <code>setConsole(Zend\Console\Adapter\AdapterInterface $console)</code> allows
  injecting a console adapter representing the current console environment. By
  default, the <code>ControllerManager</code> will inject this for you as part of
  controller instantiation.</li>
<li>The method <code>getConsole()</code> allows you to retrieve the current console adapter
  instance, allowing you to retrieve console capabilities and generate console
  output.</li>
<li>The <code>dispatch()</code> method will throw an exception if invoked in a non-console
  environment, ensuring that you do not need to do any checks within your action
  methods for the environment.</li>
</ul>
<h3 id="interfaces-and-collaborators_2">Interfaces and Collaborators</h3>
<p><code>AbstractRestfulController</code> implements each of the following interfaces:</p>
<ul>
<li><code>Zend\Stdlib\DispatchableInterface</code></li>
<li><code>Zend\Mvc\InjectApplicationEventInterface</code></li>
<li><code>Zend\ServiceManager\ServiceLocatorAwareInterface</code> (starting with zend-mvc
  2.7.0, only the methods defined by the interface, not the interface itself)</li>
<li><code>Zend\EventManager\EventManagerAwareInterface</code></li>
</ul>
<p>The composed <code>EventManager</code> will be configured to listen on the following contexts:</p>
<ul>
<li><code>Zend\Stdlib\DispatchableInterface</code></li>
<li><code>Zend\Mvc\Controller\AbstractConsoleController</code></li>
<li><code>Zend\Mvc\Controller\AbstractActionController</code></li>
<li><code>Zend\Mvc\Controller\AbstractController</code></li>
</ul>
<p>Additionally, if you extend the class, it will listen on the name of the
extending class.</p>

<hr />


<nav>
  <ul class="pager hidden-print">
    <li class="previous">
      <a rel="prev" href="../send-response-event/"><i class="fa fa-arrow-left"></i> Previous</a>
    </li>
    <li class="next">
      <a rel="next" href="../plugins/">Next <i class="fa fa-arrow-right"></i></a>
    </li>
  </ul>
</nav>
</div>
        
    </div>
    <!-- content:end -->

    <div id="footerwrap">
    <div class="container">
        <div class="row site-map">
            <div class="col-lg-3">
              <p>
                <strong>Zend Framework</strong><br />
                <a href="http://framework.zend.com/">framework.zend.com</a><br />
                <a href="https://docs.zendframework.com">docs.zendframework.com</a><br />
                <a href="https://packages.zendframework.com">packages.zendframework.com</a><br />
                <a href="https://apigility.org">apigility.org</a><br />
              </p>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-12 centered">
                <a class="back-to-top" href="#page-top"><i class="fa fa-chevron-circle-up fa-4" aria-hidden="true"></i></a>
            </div>
        </div>

        <div class="spacing"></div>

        <div class="row">
            <div class="col-lg-8">
                <h4>Copyright</h4>
                <div class="hline-w"></div>

                <p>&copy; 2006-2016 by <a href="http://www.zend.com">Zend</a>, a <a href="http://www.roguewave.com/">Rogue Wave Company</a>.</p>
            </div>

            <div class="col-lg-4">
                <h4>Contacts</h4>
                <div class="hline-w"></div>
                <p>
                    <a href="irc://irc.freenode.net/zftalk" class="btn-social btn-outline" alt="IRC" title="IRC"><i class="fa fa-comment"></i></a>
                    <a href="https://github.com/zendframework" class="btn-social btn-outline" alt="Github" title="Github"><i class="fa fa-github"></i></a>
                    <a href="https://twitter.com/zfdevteam" class="btn-social btn-outline" alt="Twitter" title="Twitter"><i class="fa fa-twitter"></i></a>
                </p>
            </div>
        </div>
    </div>
</div>


    <script src="../js/jquery-1.10.2.min.js"></script>
    <script src="../js/bootstrap-3.0.3.min.js"></script>
    <script src="../js/prism-zf.js"></script>

    <script>var base_url = '..';</script>
    <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
    <script src="../js/base.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    <div class="zf-components">
  <div class="zf-components-grid">
    <div class="zf-logo">
      <a href="http://framework.zend.com" data-toggle="tooltip" data-placement="bottom" title="Go to the ZF homepage"><img src="../img/zf-logo-mark.svg" alt="Zend Framework" width="250" /></a>
    </div>

    <div class="component-list"></div>

    <p class="zf-components-rollup"><a href="#">Hide list</a></p>
  </div>
</div>

    <script>
  // Prepare the component list dropdown for display
  $(function () {
    var components = $(".zf-components"),
        componentList = components.find(".component-list"),
        sidebar = $(".bs-sidebar.affix"),
        sidebarInitialPos = sidebar.css("position"),
        hidden,
        componentToggle = $(".component-toggle"),
        navbar = $(".navbar-fixed-top"),
        rollUpLink = $(".zf-components-rollup a");

    // Initial setup on document load
    components.insertBefore(navbar);
    $(".zf-logo a").tooltip();
    componentToggle.tooltip();
    rollUpLink.attr({ href: "#", alt: "Hide component list" });

    // Cast initial sidebar position value
    if (undefined === sidebarInitialPos) {
      sidebarInitialPos = "fixed";
    }

    // Setup onclick events to toggle list
    componentToggle.click(toggleComponentList);
    rollUpLink.click(toggleComponentList);

    // Toggle the component list display
    function toggleComponentList(event) {
      event.preventDefault();

      if (hidden === undefined) {
        // Not loaded yet; load and display.
        loadComponentList();
        return;
      }

      if (hidden) {
        // Hidden; display.
        showComponentList();
        return;
      }

      // Currently visible; hide
      hideComponentList();
    }

    // Show the component list
    function showComponentList() {
      navbar.css({position: "relative"});
      sidebar.css({position: "relative"});
      components
        .css({"margin-top": "-" + components.outerHeight() + "px"})
        .show()
        .animate({"margin-top": 0}, {
          complete: function () {
            componentToggle
              .data("placement", "top")
              .attr("data-original-title", "Hide component list");
            hidden = false;
          },
          queue: false
        });
    }

    // Hide the component list
    function hideComponentList() {
      components.animate({"margin-top": "-" + components.outerHeight() + "px"}, {
        complete: function () {
          navbar.css({position: "fixed"});
          sidebar.css({position: sidebarInitialPos});
          componentToggle
            .data("placement", "bottom")
            .attr("data-original-title", "Show component list");
          components.hide();
          hidden = true;
        },
        queue: false
      });
      sidebar.animate({ top: sidebarInitialTop + "px" }, { queue: false});
    }

    // Inject a component into the componet list DOM.
    function injectComponent(index, component) {
      componentList.append('<div class="component"><h4><a href="' + component.url + '">' + component.name + '</a></h4><p>' + component.description + '</p></div>');
    }

    // Parse the component list, build the DOM, and display it.
    function parseComponentList(components) {
      $.each(components, injectComponent);
      showComponentList();
    }

    // Fetch the component list and display it.
    function loadComponentList () {
      $.ajax({
        url: "//docs.zendframework.com/zf-mkdoc-theme/scripts/zf-component-list.json",
        dataType: "text json",
        success: parseComponentList,
        error: function (e) {
          console.log("Error occurred with XHR call", e);
        }
      });
    }
  });
</script>
    </body>

</html>
