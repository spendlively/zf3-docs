<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <link rel="shortcut icon" href="../../img/favicon.ico">

    <title>Introducing the Blog Module - tutorials</title>

    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href="//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Libre+Baskerville:400,400italic,700&subset=latin,latin-ext" rel="stylesheet" type="text/css">
    <link href="../../css/base.css" rel="stylesheet">
    <link href="../../css/zf-web.css" rel="stylesheet">
    <link href="../../css/zf.css" rel="stylesheet">
    <link href="../../css/prism-zf.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <span class="navbar-brand">
              <a class="logo-link" href="http://framework.zend.com" data-toggle="tooltip" data-placement="bottom" title="Zend Framework"><img src="../../img/zf-logo-mark.svg" height="28" alt="Zend Framework" /></a>
              <a href="../..">tutorials</a>
            </span>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">MVC Tutorials <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Getting Started with Zend Framework</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../getting-started/overview/">Overview</a>
</li>

        
            
<li >
    <a href="../../getting-started/skeleton-application/">The Skeleton Application</a>
</li>

        
            
<li >
    <a href="../../getting-started/modules/">Modules</a>
</li>

        
            
<li >
    <a href="../../getting-started/routing-and-controllers/">Routing and Controllers</a>
</li>

        
            
<li >
    <a href="../../getting-started/database-and-models/">Database and Models</a>
</li>

        
            
<li >
    <a href="../../getting-started/forms-and-actions/">Forms and Actions</a>
</li>

        
            
<li >
    <a href="../../getting-started/conclusion/">Conclusion</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../../unit-testing/">Unit Testing A zend-mvc Application</a>
</li>

                        
                            
<li >
    <a href="../../navigation/">Adding zend-navigation to the Album Module</a>
</li>

                        
                            
<li >
    <a href="../../pagination/">Adding zend-paginator to the Album Module</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">In-Depth Tutorial</a>
    <ul class="dropdown-menu">
        
            
<li class="active">
    <a href="./">Introducing the Blog Module</a>
</li>

        
            
<li >
    <a href="../models-and-servicemanager/">Models and the ServiceManager</a>
</li>

        
            
<li >
    <a href="../preparing-databases/">Preparing for Different Databases</a>
</li>

        
            
<li >
    <a href="../zend-db-sql-zend-hydrator/">SQL Abstraction and Object Hydration</a>
</li>

        
            
<li >
    <a href="../understanding-routing/">Understanding the Router</a>
</li>

        
            
<li >
    <a href="../zend-form-zend-form-fieldset/">Making Use of Forms and Fieldsets</a>
</li>

        
            
<li >
    <a href="../data-binding/">Editing and Deleting Data</a>
</li>

        
            
<li >
    <a href="../review/">Reviewing the Blog Module</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../../advanced-config/">Advanced Configuration</a>
</li>

                        
                            
<li >
    <a href="../../i18n/">Internationalization</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Component Tutorials <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../db-adapter/">Setting Up A Database Adapter</a>
</li>

                        
                            
<li >
    <a href="../../event-manager/">Using the EventManager</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Migration <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">To Version 3</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../migration/to-v3/overview/">Overview</a>
</li>

        
            
<li >
    <a href="../../migration/to-v3/components/">Components</a>
</li>

        
            
<li >
    <a href="../../migration/to-v3/application/">Applications</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" class="component-toggle" data-toggle="tooltip" data-placement="bottom" title="Show component list">
                        <i class="fa fa-book"></i> Components
                    </a>
                </li>

                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li>
                        <a href="https://github.com/zendframework/tutorials">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

    <!-- content:begin -->
    <div id="page-top" class="container docs">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#introducing-the-blog-module">Introducing the Blog Module</a></li>
        
            <li><a href="#writing-a-new-module">Writing a new Module</a></li>
        
            <li><a href="#configuring-the-module">Configuring the Module</a></li>
        
    
    </ul>

    
    <ul class="pager hidden-print">
      <li class="previous">
        <a rel="prev" href="../../pagination/"><i class="fa fa-arrow-left"></i> Previous</a>
      </li>
      <li class="next">
        <a rel="next" href="../models-and-servicemanager/">Next <i class="fa fa-arrow-right"></i></a>
      </li>
    </ul>
    
</div></div>
        <div class="col-md-9" role="main">

<ol class="breadcrumb" role="navigation" aria-label="breadcrumbs navigation">
  <li><a href="../..">tutorials</a> &raquo;</li>
  
    
      
        <li>MVC Tutorials &raquo;</li>
      
    
      
        <li>In-Depth Tutorial &raquo;</li>
      
    
  
  <li class="active">Introducing the Blog Module</li>
</ol>

<h1 id="introducing-the-blog-module">Introducing the Blog Module</h1>
<p>Now that we know about the basics of the zend-mvc skeleton application,
let's continue and create our very own module. We will create a module named
"Blog". This module will display a list of database entries that represent a
single blog post. Each post will have three properties: <code>id</code>, <code>text</code>, and
<code>title</code>. We will create forms to enter new posts into our database and to edit
existing posts. Furthermore we will do so by using best-practices throughout the
whole tutorial.</p>
<h2 id="writing-a-new-module">Writing a new Module</h2>
<p>Let's start by creating a new folder under the <code>/module</code> directory called
<code>Blog</code>, with the following stucture:</p>
<pre class="codehilite"><code class="language-text linenums">module/
    Blog/
        config/
        src/
        view/</code></pre>

<p>To be recognized as a module by the <a href="https://zendframework.github.io/zend-modulemanager/intro/">ModuleManager</a>,
we need to do three things:</p>
<ul>
<li>Tell Composer how to autoload classes from our new module.</li>
<li>Create a <code>Module</code> class in the <code>Blog</code> namespace.</li>
<li>Notify the application of the new module.</li>
</ul>
<p>Let's tell Composer about our new module. Open the <code>composer.json</code> file in the
project root, and edit the <code>autoload</code> section to add a new PSR-4 entry for the
<code>Blog</code> module; when you're done, it should read:</p>
<pre class="codehilite"><code class="language-json linenums">&quot;autoload&quot;: {
   &quot;psr-4&quot;: {
        &quot;Application\\&quot;: &quot;module/Application/src/&quot;,
        &quot;Album\\&quot;: &quot;module/Album/src/&quot;,
        &quot;Blog\\&quot;: &quot;module/Blog/src/&quot;
   }
}</code></pre>

<p>Once you're done, tell Composer to update its autoloading definitions:</p>
<pre class="codehilite"><code class="language-bash linenums">$ composer dump-autoload</code></pre>

<p>Next, we will create a <code>Module</code> class under the <code>Blog</code> namespace. Create the
file <code>module/Blog/src/Module.php</code> with the following contents:</p>
<pre class="codehilite"><code class="language-php linenums">&lt;?php
namespace Blog;

class Module
{
}</code></pre>

<p>We now have a module that can be detected by the
<a href="https://zendframework.github.io/zend-modulemanager/intro/">ModuleManager</a>.
Let's add this module to our application. Although our module doesn't do
anything yet, just having the <code>Module.php</code> class allows it to be loaded by the
ModuleManager.  To do this, add an entry for <code>Blog</code> to the modules array inside
<code>config/modules.config.php</code>:</p>
<pre class="codehilite"><code class="language-php linenums">&lt;?php
// In config/modules.config.php:

return [
    /* ... */
    'Application',
    'Album',
    'Blog',
];</code></pre>

<p>If you refresh your application you should see no change at all (but also no
errors).</p>
<p>At this point it's worth taking a step back to discuss what modules are for. In
short, a module is an encapsulated set of features for your application. A
module might add features to the application that you can see, like our <code>Blog</code>
module; or it might provide background functionality for other modules in the
application to use, such as interacting with a third party API.</p>
<p>Organizing your code into modules makes it easier for you to reuse functionality
in other application, or to use modules written by the community.</p>
<h2 id="configuring-the-module">Configuring the Module</h2>
<p>The next thing we're going to do is add a route to our application so that our
module can be accessed through the URL <code>localhost:8080/blog</code>. We do this by
adding router configuration to our module, but first we need to let the
<code>ModuleManager</code> know that our module has configuration that it needs to load.</p>
<p>This is done by adding a <code>getConfig()</code> method to the <code>Module</code> class that
returns the configuration. (This method is defined in the
<code>ConfigProviderInterface</code>, although explicitly implementing this interface in the
module class is optional.) This method should return either an <code>array</code> or a
<code>Traversable</code> object. Continue by editing <code>module/Blog/src/Module.php</code>:</p>
<pre class="codehilite"><code class="language-php linenums">// In /module/Blog/Module.php:
class Module
{
    public function getConfig()
    {
        return [];
    }
}</code></pre>

<p>With this, our module is now able to be configured. Configuration files can
become quite big, though, and keeping everything inside the <code>getConfig()</code> method
won't be optimal. To help keep our project organized, we're going to put our
array configuration in a separate file. Go ahead and create this file at
<code>module/Blog/config/module.config.php</code>:</p>
<pre class="codehilite"><code class="language-php linenums">&lt;?php
return [];</code></pre>

<p>Now rewrite the <code>getConfig()</code> function to include this newly created
file instead of directly returning the array:</p>
<pre class="codehilite"><code class="language-php linenums">&lt;?php
// In /module/Blog/Module.php:

public function getConfig()
{
    return include __DIR__ . '/../config/module.config.php';
}</code></pre>

<p>Reload your application and you'll see that everything remains as it was. Next
we add the new route to our configuration file:</p>
<pre class="codehilite"><code class="language-php linenums">// In /module/Blog/config/module.config.php:
namespace Blog;

use Zend\Router\Http\Literal;

return [
    // This lines opens the configuration for the RouteManager
    'router' =&gt; [
        // Open configuration for all possible routes
        'routes' =&gt; [
            // Define a new route called &quot;blog&quot;
            'blog' =&gt; [
                // Define a &quot;literal&quot; route type:
                'type' =&gt; Literal::class,
                // Configure the route itself
                'options' =&gt; [
                    // Listen to &quot;/blog&quot; as uri:
                    'route' =&gt; '/blog',
                    // Define default controller and action to be called when
                    // this route is matched
                    'defaults' =&gt; [
                        'controller' =&gt; Controller\ListController::class,
                        'action'     =&gt; 'index',
                    ],
                ],
            ],
        ],
    ],
];</code></pre>

<p>We've now created a route called <code>post</code> that listens to the URL
<code>localhost:8080/blog</code>. Whenever someone accesses this route, the <code>indexAction()</code>
function of the class <code>Blog\Controller\ListController</code> will be executed.
However, this controller does not exist yet, so if you reload the page you will
see this error message:</p>
<pre class="codehilite"><code class="language-text linenums">A 404 error occurred
Page not found.
The requested controller could not be mapped by routing.

Controller:
Blog\Controller\ListController(resolves to invalid controller class or alias: Blog\Controller\ListController)</code></pre>

<p>We now need to tell our module where to find this controller named
<code>Blog\Controller\ListController</code>. To achieve this we have to add this key to the
<code>controllers</code> configuration key inside your
<code>module/Blog/config/module.config.php</code>.</p>
<pre class="codehilite"><code class="language-php linenums">namespace Blog;

use Zend\ServiceManager\Factory\InvokableFactory;

return [
    'controllers' =&gt; [
        'factories' =&gt; [
            Controller\ListController::class =&gt; InvokableFactory::class,
        ],
    ],
    /* ... */
];</code></pre>

<p>This configuration defines a factory for the controller class
<code>Blog\Controller\ListController</code>, using the zend-servicemanager
<code>InvokableFactory</code> (which, internally, instantiates the class with no
arguments).  Reloading the page should then give you:</p>
<pre class="codehilite"><code class="language-text linenums">Fatal error: Class 'Blog\Controller\ListController' not found in {projectPath}/vendor/zendframework/zend-servicemanager/src/Factory/InvokableFactory.php on line 32</code></pre>

<p>This error tells us that the application knows what class to load, but was not
able to autoload it. In our case, we've already setup autoloading, but have not
yet defined the controller class!</p>
<p>Create the file <code>module/Blog/src/Controller/ListController.php</code> with the
following contents:</p>
<pre class="codehilite"><code class="language-php linenums">&lt;?php
namespace Blog\Controller;

class ListController
{
}</code></pre>

<p>Reloading the page now will finally result into a new screen. The new error message looks like this:</p>
<pre class="codehilite"><code class="language-html linenums">A 404 error occurred
Page not found.
The requested controller was not dispatchable.

Controller:
Blog\Controller\List(resolves to invalid controller class or alias: Blog\Controller\List)

Additional information:
Zend\ServiceManager\Exception\InvalidServiceException

File:
{projectPath}/vendor/zendframework/zend-mvc/src/Controller/ControllerManager.php:{lineNumber}

Message:
Plugin of type &quot;Blog\Controller\ListController&quot; is invalid; must implement Zend\Stdlib\DispatchableInterface</code></pre>

<p>This happens because our controller must implement
<a href="https://github.com/zendframework/zend-stdlib/blob/0e66240daec93f19ae104084e369c393453fc901/src/DispatchableInterface.php">DispatchableInterface</a>
in order to be 'dispatched' (or run) by zend-mvc. zend-mvc provides a base
controller implementation of it with
<a href="https://github.com/zendframework/zend-mvc/blob/9fc7f2cf569760d6a0cdc62f56e042a0aee3a4c9/src/Controller/AbstractActionController.php">AbstractActionController</a>,
which we are going to use. Let's modify our controller now:</p>
<pre class="codehilite"><code class="language-php linenums">// In /module/Blog/src/Blog/Controller/ListController.php:

namespace Blog\Controller;

use Zend\Mvc\Controller\AbstractActionController;

class ListController extends AbstractActionController
{
}</code></pre>

<p>It's now time for another refresh of the site. You should now see a new error message:</p>
<pre class="codehilite"><code class="language-text linenums">An error occurred

An error occurred during execution; please try again later.

Additional information:

Zend\View\Exception\RuntimeException

File:
{projectPath}/vendor/zendframework/zend-view/src/Renderer/PhpRenderer.php:{lineNumber}

Message:
Zend\View\Renderer\PhpRenderer::render: Unable to render template &quot;blog/list/index&quot;; resolver could not resolve to a file</code></pre>

<p>Now the application tells you that a view template-file can not be rendered,
which is to be expected as we've not created it yet. The application is
expecting it to be at <code>module/Blog/view/blog/list/index.phtml</code>. Create this
file and add some dummy content to it:</p>
<pre class="codehilite"><code class="language-html linenums">&lt;!-- Filename: module/Blog/view/blog/list/index.phtml --&gt;
&lt;h1&gt;Blog\ListController::indexAction()&lt;/h1&gt;</code></pre>

<p>Before we continue let us quickly take a look at where we placed this file. Note
that view files are found within the <code>/view</code> subdirectory, not <code>/src</code> as they
are not PHP class files, but template files for rendering HTML. The path,
however, deserves some explanation. First we have the lowercased namespace,
followed by the lowercased controller name (without the suffix 'controller'),
and lastly comes the name of the action that we are accessing (again without the
suffix 'action'). As a templated string, you can think of it as:
<code>view/{namespace}/{controller}/{action}.phtml</code>. This has become a community
standard but you have the freedom to specify custom paths if desired.</p>
<p>However creating this file alone is not enough and this brings as to the final
topic of this part of the tutorial. We need to let the application know where
to look for view files. We do this within our module's configuration file,
<code>module.config.php</code>.</p>
<pre class="codehilite"><code class="language-php linenums">// In module/Blog/config/module.config.php:

return [
    'controllers' =&gt; [ /** Controller Configuration */ ],
    'router'      =&gt; [ /** Route Configuration */ ]
    'view_manager' =&gt; [
        'template_path_stack' =&gt; [
            __DIR__ . '/../view',
        ],
    ],
];</code></pre>

<p>The above configuration tells the application that the folder
<code>module/Blog/view/</code> has view files in it that match the above described default
scheme. It is important to note that with this you can not only ship view files
for your module, but you can also overwrite view files from other modules.</p>
<p>Reload your site now. Finally we are at a point where we see something different
than an error being displayed! Congratulations, not only have you created a
simple "Hello World" style module, you also learned about many error messages
and their causes. If we didn't exhaust you too much, continue with our
tutorial, and let's create a module that actually does something.</p>

<hr />


<nav>
  <ul class="pager hidden-print">
    <li class="previous">
      <a rel="prev" href="../../pagination/"><i class="fa fa-arrow-left"></i> Previous</a>
    </li>
    <li class="next">
      <a rel="next" href="../models-and-servicemanager/">Next <i class="fa fa-arrow-right"></i></a>
    </li>
  </ul>
</nav>
</div>
        
    </div>
    <!-- content:end -->

    <div id="footerwrap">
    <div class="container">
        <div class="row site-map">
            <div class="col-lg-3">
              <p>
                <strong>Zend Framework</strong><br />
                <a href="http://framework.zend.com/">framework.zend.com</a><br />
                <a href="https://docs.zendframework.com">docs.zendframework.com</a><br />
                <a href="https://packages.zendframework.com">packages.zendframework.com</a><br />
                <a href="https://apigility.org">apigility.org</a><br />
              </p>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-12 centered">
                <a class="back-to-top" href="#page-top"><i class="fa fa-chevron-circle-up fa-4" aria-hidden="true"></i></a>
            </div>
        </div>

        <div class="spacing"></div>

        <div class="row">
            <div class="col-lg-8">
                <h4>Copyright</h4>
                <div class="hline-w"></div>

                <p>&copy; 2006-2016 by <a href="http://www.zend.com">Zend</a>, a <a href="http://www.roguewave.com/">Rogue Wave Company</a>.</p>
            </div>

            <div class="col-lg-4">
                <h4>Contacts</h4>
                <div class="hline-w"></div>
                <p>
                    <a href="irc://irc.freenode.net/zftalk" class="btn-social btn-outline" alt="IRC" title="IRC"><i class="fa fa-comment"></i></a>
                    <a href="https://github.com/zendframework" class="btn-social btn-outline" alt="Github" title="Github"><i class="fa fa-github"></i></a>
                    <a href="https://twitter.com/zfdevteam" class="btn-social btn-outline" alt="Twitter" title="Twitter"><i class="fa fa-twitter"></i></a>
                </p>
            </div>
        </div>
    </div>
</div>


    <script src="../../js/jquery-1.10.2.min.js"></script>
    <script src="../../js/bootstrap-3.0.3.min.js"></script>
    <script src="../../js/prism-zf.js"></script>

    <script>var base_url = '../..';</script>
    <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
    <script src="../../js/base.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    <div class="zf-components">
  <div class="zf-components-grid">
    <div class="zf-logo">
      <a href="http://framework.zend.com" data-toggle="tooltip" data-placement="bottom" title="Go to the ZF homepage"><img src="../../img/zf-logo-mark.svg" alt="Zend Framework" width="250" /></a>
    </div>

    <div class="component-list"></div>

    <p class="zf-components-rollup"><a href="#">Hide list</a></p>
  </div>
</div>

    <script>
  // Prepare the component list dropdown for display
  $(function () {
    var components = $(".zf-components"),
        componentList = components.find(".component-list"),
        sidebar = $(".bs-sidebar.affix"),
        sidebarInitialPos = sidebar.css("position"),
        hidden,
        componentToggle = $(".component-toggle"),
        navbar = $(".navbar-fixed-top"),
        rollUpLink = $(".zf-components-rollup a");

    // Initial setup on document load
    components.insertBefore(navbar);
    $(".zf-logo a").tooltip();
    componentToggle.tooltip();
    rollUpLink.attr({ href: "#", alt: "Hide component list" });

    // Cast initial sidebar position value
    if (undefined === sidebarInitialPos) {
      sidebarInitialPos = "fixed";
    }

    // Setup onclick events to toggle list
    componentToggle.click(toggleComponentList);
    rollUpLink.click(toggleComponentList);

    // Toggle the component list display
    function toggleComponentList(event) {
      event.preventDefault();

      if (hidden === undefined) {
        // Not loaded yet; load and display.
        loadComponentList();
        return;
      }

      if (hidden) {
        // Hidden; display.
        showComponentList();
        return;
      }

      // Currently visible; hide
      hideComponentList();
    }

    // Show the component list
    function showComponentList() {
      navbar.css({position: "relative"});
      sidebar.css({position: "relative"});
      components
        .css({"margin-top": "-" + components.outerHeight() + "px"})
        .show()
        .animate({"margin-top": 0}, {
          complete: function () {
            componentToggle
              .data("placement", "top")
              .attr("data-original-title", "Hide component list");
            hidden = false;
          },
          queue: false
        });
    }

    // Hide the component list
    function hideComponentList() {
      components.animate({"margin-top": "-" + components.outerHeight() + "px"}, {
        complete: function () {
          navbar.css({position: "fixed"});
          sidebar.css({position: sidebarInitialPos});
          componentToggle
            .data("placement", "bottom")
            .attr("data-original-title", "Show component list");
          components.hide();
          hidden = true;
        },
        queue: false
      });
      sidebar.animate({ top: sidebarInitialTop + "px" }, { queue: false});
    }

    // Inject a component into the componet list DOM.
    function injectComponent(index, component) {
      componentList.append('<div class="component"><h4><a href="' + component.url + '">' + component.name + '</a></h4><p>' + component.description + '</p></div>');
    }

    // Parse the component list, build the DOM, and display it.
    function parseComponentList(components) {
      $.each(components, injectComponent);
      showComponentList();
    }

    // Fetch the component list and display it.
    function loadComponentList () {
      $.ajax({
        url: "//docs.zendframework.com/zf-mkdoc-theme/scripts/zf-component-list.json",
        dataType: "text json",
        success: parseComponentList,
        error: function (e) {
          console.log("Error occurred with XHR call", e);
        }
      });
    }
  });
</script>
    </body>

</html>
